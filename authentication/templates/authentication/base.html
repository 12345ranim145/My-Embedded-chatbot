<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Embedded Engineer Chatbot{% endblock %}</title>
    <!-- Google Fonts (Modern) -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <!-- Bootstrap 5 + Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-dark: #0f172a;
            --primary-light: #1e40af;
            --accent: #3b82f6;
            --text: #f8fafc;
            --glass: rgba(255, 255, 255, 0.1);
            --shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }
        /* Theme variations */
        .theme-blue { --primary-dark: #0f172a; --primary-light: #1e40af; --accent: #3b82f6; }
        .theme-purple { --primary-dark: #1e1b4b; --primary-light: #6d28d9; --accent: #8b5cf6; }
        .theme-emerald { --primary-dark: #022c22; --primary-light: #059669; --accent: #10b981; }
        .theme-sunset { --primary-dark: #431407; --primary-light: #ea580c; --accent: #fb923c; }
        body {
            margin: 0;
            min-height: 100vh;
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, var(--primary-dark), var(--primary-light));
            color: var(--text);
            overflow-x: hidden;
            position: relative;
        }
        /* Animated Particles Background */
        #particles {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
            pointer-events: none;
        }
        .navbar {
            background: var(--glass) !important;
            backdrop-filter: blur(12px);
            border-bottom: 1px solid rgba(255,255,255,0.1);
            box-shadow: var(--shadow);
        }
        .navbar-brand {
            font-weight: 700;
            font-size: 1.5rem;
            background: linear-gradient(90deg, #60a5fa, #c084fc);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        /* Glassmorphic Cards */
        .glass-card {
            background: var(--glass);
            border-radius: 20px;
            backdrop-filter: blur(16px);
            border: 1px solid rgba(255,255,255,0.1);
            box-shadow: var(--shadow);
            padding: 2.5rem;
            position: relative;
            z-index: 1;
        }
        /* Theme Palette - Modern & Animated */
        .theme-switcher {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        .theme-dot {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            border: 3px solid rgba(255,255,255,0.2);
        }
        .theme-dot:hover {
            transform: scale(1.2) translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.4);
        }
        .theme-dot:active {
            transform: scale(0.95);
        }
        h1, h2, h3 {
            background: linear-gradient(90deg, #93c5fd, #ddd6fe);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
        }
        .btn-primary {
            background: linear-gradient(45deg, var(--accent), #60a5fa);
            border: none;
            border-radius: 50px;
            padding: 12px 30px;
            font-weight: 600;
            transition: all 0.3s;
        }
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        .form-control {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: #fff;
            border-radius: 10px;
        }
        .form-control:focus {
            background: rgba(255, 255, 255, 0.15);
            border-color: var(--accent);
            color: #fff;
            box-shadow: 0 0 0 0.2rem rgba(59, 130, 246, 0.25);
        }
        .form-control::placeholder {
            color: #94a3b8;
        }
    </style>
</head>
<body class="theme-blue">
    <!-- Floating Particles Background -->
    <div id="particles"></div>
    <!-- Modern Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="bi bi-cpu-fill me-2"></i>Embedded Engineer Bot
            </a>
            <div class="theme-switcher">
                <div class="theme-dot" style="background: linear-gradient(#1e40af, #3b82f6);" 
                     onclick="setTheme('theme-blue')" title="Blue Ocean"></div>
                <div class="theme-dot" style="background: linear-gradient(#6d28d9, #8b5cf6);" 
                     onclick="setTheme('theme-purple')" title="Purple Nebula"></div>
                <div class="theme-dot" style="background: linear-gradient(#059669, #10b981);" 
                     onclick="setTheme('theme-emerald')" title="Emerald Forest"></div>
                <div class="theme-dot" style="background: linear-gradient(#ea580c, #fb923c);" 
                     onclick="setTheme('theme-sunset')" title="Sunset Fire"></div>
            </div>
        </div>
    </nav>
    <!-- Main Content -->
    <div class="container mt-5 pt-5">
        <div class="row justify-content-center">
            <div class="col-lg-6 col-md-8">
                {% block content %}{% endblock %}
            </div>
        </div>
    </div>
    <!-- Sound Effect: Hello + Username -->
    {% if user.is_authenticated %}
    <audio id="welcomeSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-positive-interface-beep-205.mp3" type="audio/mpeg">
    </audio>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const audio = document.getElementById("welcomeSound");
            const username = "{{ user.first_name|default:'there' }}";
           
            // Use Web Speech API for natural voice
            const utterance = new SpeechSynthesisUtterance(`Hello ${username}! Welcome back to Embedded Engineer Bot.`);
            utterance.lang = "en-US";
            utterance.rate = 0.9;
            utterance.pitch = 1.1;
            // Play sound + voice
            audio.play().catch(() => {});
            speechSynthesis.speak(utterance);
        });
    </script>
    {% endif %}
    <!-- Particles.js for cool background -->
    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script>
        particlesJS("particles", {
            "particles": {
                "number": { "value": 80 },
                "color": { "value": "#ffffff" },
                "shape": { "type": "circle" },
                "opacity": { "value": 0.4, "random": true },
                "size": { "value": 3, "random": true },
                "line_linked": { "enable": true, "distance": 150, "color": "#ffffff", "opacity": 0.2, "width": 1 },
                "move": { "enable": true, "speed": 2 }
            },
            "interactivity": {
                "detect_on": "canvas",
                "events": { "onhover": { "enable": true, "mode": "repulse" } }
            },
            "retina_detect": true
        });
        // Theme Switcher Function
        function setTheme(themeName) {
            document.body.className = themeName;
            localStorage.setItem("theme", themeName);
        }
        // Load saved theme
        window.onload = function() {
            const savedTheme = localStorage.getItem("theme") || "theme-blue";
            document.body.className = savedTheme;
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>